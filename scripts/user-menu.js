var i=document.querySelector(".header"),r=i.querySelector(".user-menu"),o=r.querySelector(".user-menu__toggler"),t=r.querySelector(".user-menu__popup"),a=()=>{let e=i.getBoundingClientRect(),u=t.getBoundingClientRect(),d=e.width,p=e.right-u.right,l=d-p-24;t.style.maxWidth=`${l}px`},s=e=>{e.target.closest(".user-menu__popup")||n()},c=e=>{e.key==="Escape"&&n()},g=e=>{e.stopPropagation(),n()};function n(){t.classList.toggle("user-menu__popup--is-opened"),t.classList.toggle("user-menu__popup--is-closed"),t.classList.contains("user-menu__popup--is-opened")?(document.addEventListener("click",s),document.addEventListener("keydown",c)):(document.removeEventListener("click",s),document.removeEventListener("keydown",c))}var m=()=>{o.addEventListener("click",a,{once:!0}),o.addEventListener("click",g)};export{m as init};
